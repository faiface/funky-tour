<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Functions - A Tour of Funky</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li><a href="1-taking-off-the-ground.html"><strong aria-hidden="true">1.</strong> Taking off the ground</a></li><li><ol class="section"><li><a href="1-1-installing.html"><strong aria-hidden="true">1.1.</strong> Installing</a></li><li><a href="1-2-hello-world.html"><strong aria-hidden="true">1.2.</strong> Hello, world!</a></li><li><a href="1-3-expressions-and-types.html"><strong aria-hidden="true">1.3.</strong> Expressions and types</a></li><li><a href="1-4-semicolons-and-lambdas.html"><strong aria-hidden="true">1.4.</strong> Semicolons and lambdas</a></li><li><a href="1-5-a-bit-more-about-io.html"><strong aria-hidden="true">1.5.</strong> A bit more about IO</a></li><li><a href="1-6-putting-it-together-a-calculator.html"><strong aria-hidden="true">1.6.</strong> Putting it together: a calculator</a></li></ol></li><li><a href="2-making-the-world-our-own.html"><strong aria-hidden="true">2.</strong> Making the world our own</a></li><li><ol class="section"><li><a href="2-1-functions.html" class="active"><strong aria-hidden="true">2.1.</strong> Functions</a></li><li><a href="2-2-records.html"><strong aria-hidden="true">2.2.</strong> Records</a></li><li><a href="2-3-unions.html"><strong aria-hidden="true">2.3.</strong> Unions</a></li><li><a href="2-4-aliases.html"><strong aria-hidden="true">2.4.</strong> Aliases</a></li></ol></li><li><a href="3-the-other-half-of-the-language.html"><strong aria-hidden="true">3.</strong> The other half of the language</a></li><li><ol class="section"><li><a href="3-1-for-loop-is-a-function.html"><strong aria-hidden="true">3.1.</strong> For loop is a function</a></li><li><a href="3-2-yield-it-all.html"><strong aria-hidden="true">3.2.</strong> Yield it all!</a></li><li><a href="3-3-isn't-colon-equals-imperative.html"><strong aria-hidden="true">3.3.</strong> Isn't := imperative?</a></li><li><a href="3-4-maybe-some-pairs.html"><strong aria-hidden="true">3.4.</strong> Maybe some pairs</a></li><li><a href="3-5-appendix-a-list-of-useful-functions.html"><strong aria-hidden="true">3.5.</strong> Appendix: a list of useful functions</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">A Tour of Funky</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#functions" id="functions"><h1>Functions</h1></a>
<p>So far, we've only seen one function defined: the <code>main</code> function. But even from that alone I'm sure you've already guessed how function definitions look. They're quite simple:</p>
<pre><code class="language-funky">func name : type = body
</code></pre>
<p>That's it!</p>
<p>The <strong>name</strong> can be any string of non-whitespace characters excluding keyword symbols like parentheses, a backslash, a semicolon, and a few others.</p>
<p>The <strong>type</strong> specifies the type that the function name will aquire.</p>
<p>The <strong>body</strong> is an arbitrary Funky expression, functions, lambda, etc. can be used. The only limitation is that it must conform to the type.</p>
<blockquote>
<p><strong>Details.</strong> Let's talk a bit about types.</p>
<p>As we've already learned, there are three built-in types: <code>Int</code>, <code>Float</code>, and <code>Char</code>. There are also a few types from the standard library, such as <code>Bool</code>, or <code>String</code>.</p>
<p>Then there are types that take other types as arguments - a types that are, so called, generic. The <em>most important</em> of such generic types is the function type. This is also actually built-in, but since it's a type constructor, rather than a full, distinct type, I haven't included it among the built-in types previously.</p>
<p>The function type constructor is called 'the arrow', written as: <code>-&gt;</code>. It takes two arguments, the input type on the left and the output type on the right. For example, <code>Int -&gt; Bool</code> is a function that takes an <code>Int</code> and evaluates to a <code>Bool</code>.</p>
</blockquote>
<p>So, let's define a function! Every functional language tutorial <em>must</em> include a factorial example, so let's get that behind us:</p>
<pre><code class="language-funky">func factorial : Int -&gt; Int =
    \n
    if (n &lt;= 0) 1;
    n * factorial (n - 1)

func main : IO =
    print &quot;Type a number: &quot;;
    scanln \n-str
    let (int n-str) \n
    println (string; factorial n);
    quit
</code></pre>
<p>A standard, well known, recursive factorial definition.</p>
<blockquote>
<p><strong>Note.</strong> In Funky it's a convention to put arguments on the next line after <code>=</code> in the function definition. If the function is very short, this convention may be broken and the whole definition may sit on a single line.</p>
</blockquote>
<blockquote>
<p><strong>Details.</strong> The order of definitions doesn't matter. A function doesn't have to be 'defined before use'. All that matters is that it is defined.</p>
</blockquote>
<p>Let's try it:</p>
<pre><code>$ funkycmd factorial.fn
Type a number: 5
120
</code></pre>
<p>If it gives <code>120</code> for <code>5</code> then it surely works. Let's try something bigger:</p>
<pre><code>$ funkycmd factorial.fn
Type a number: 99
933262154439441526816992388562667004907159682643816214685929638952175999932299156089414639761565182862536979208272237582511852109168640000000000000000000000
</code></pre>
<p>Whoa, that's a number! You can try entering even bigger inputs, but don't go too big... you may freeze your system.</p>
<p><strong>Now, how about functions with multiple arguments?</strong> Say we want to make a function called <code>divides</code> that tells us whether one integer divides another or not.</p>
<p>In Funky, as in many other functional languages, there are no functions of more than one argument. Instead, there are functions that return functions. A function of two arguments really is a function that takes the first argument and returns a new function. This new function remembers the first argument and takes the second one.</p>
<p>What would be the type of such a function?</p>
<p>The type <code>Int -&gt; (Int -&gt; Bool)</code> would do. It takes the first <code>Int</code>, evaluates to a function taking the second <code>Int</code> and finally evaluates to <code>Bool</code>.</p>
<p>Great, now how would we call such a function?</p>
<p>Using <code>(divides 9) 3</code> would obviously work. But, we don't really need the parentheses. If parentheses are not present, they're implicitly from the left, so <code>divides 9 3</code> is good too.</p>
<p>Furthermore, the parentheses in the type <code>Int -&gt; (Int -&gt; Bool)</code> aren't needed either. Since <code>-&gt;</code> is used infix, it's automatically parenthesized from the right, so <code>Int -&gt; Int -&gt; Bool</code> is equivalent.</p>
<blockquote>
<p><strong>Details.</strong> There are two kinds of functions in Funky: prefix and infix. Infix functions can be identified easily: they don't contain any letters. All other functions are prefix.</p>
<p>Applications of prefix functions are automatically parenthesized from the left if no explicit parenthesis are present. In all cases, <code>f x y</code> is the same as <code>(f x) y</code>.</p>
<p>Applications of infix functions are, however, automatically parenthesized from the right. All of them have the same precedence. This is to simplify programmer's life: when defining own infix functions, you won't be bothered by specifying precedence levels or associativity. So, <code>3 * 2 + 1</code> is equivalent to <code>3 * (2 + 1)</code>.</p>
</blockquote>
<p>After learning about automatic parentheses (also called left/right-associativity), here's the definition of <code>divides</code>:</p>
<pre><code class="language-funky">func divides : Int -&gt; Int -&gt; Bool =
    \m \n
    (n % m) == 0
</code></pre>
<p>The body is just two lambdas nested inside one another, which perfectly reflects the type.</p>
<p>We could've also called the function <code>/?</code>, in which case it would be an infix function. However, the name <code>divides</code> is much more descriptive.</p>
<p><strong>Function types may also contain type variables</strong>. These are distinguished from actual types by being all lower-case. Actual types must contain an upper-case character - type variables must not.</p>
<p>When a function has a type variable in its type, that means that this function is fine with whatever type instead of that variable. For example, there's this (probably controversialy named function, usually it's called <code>id</code>) function called <code>self</code>:</p>
<pre><code>$ funkycmd -types
&gt; self
a -&gt; a
</code></pre>
<p>It doesn't do anything. It just returns whatever it was passed. For example, <code>self 4</code> is <code>4</code>. Now, when we passed <code>4</code> to <code>self</code>, its type changed a bit. It specialized. It became <code>Int -&gt; Int</code>. See? We get this specialization just by replacing <code>a</code> with <code>Int</code> in the type. That's how type variables work.</p>
<a class="header" href="#overloading" id="overloading"><h2>Overloading</h2></a>
<p>Words in natural language usually don't have just one meaning: &quot;If only there was a <em>way</em> we could continue that <em>way</em>, we could've been <em>way</em> ahead of them, but in a <em>way</em>, we haven't done so bad.&quot; The previous sentence used four different meanings of the word 'way'.</p>
<p>Using same words for different, or slightly different meanings in different contexts allows for very concise and expressive speach. Imagine that we'd have to invent a brand new word every time we'd like to add a new meaning to an existing word. That would be cumbersome and unnatural.</p>
<p>Programming is no different. When designing Funky, I realized that support for function overloading brings so many benefits that I couldn't ignore it despite the initial difficulty of implementation.</p>
<p>So, let's try it!</p>
<pre><code class="language-funky">func double : Int -&gt; Int =
    \x x * 2

func double : Float -&gt; Float =
    \x x * 2.0

func main : IO =
    println (string; double 9);
    println (string; double 4.3);
    quit
</code></pre>
<p>There we go, two versions of <code>double</code>: one for <code>Int</code>s, one for <code>Float</code>s. Let's run it!</p>
<pre><code>$ funkycmd double.fn
18
8.6
</code></pre>
<p>Works like charm!</p>
<p>Now, how about defining two functions like this?</p>
<pre><code class="language-funky">func zero : Int = 0

func zero : Float = 0.0

func main : IO =
    println (string zero);
    quit
</code></pre>
<p>This time, both versions of <code>zero</code> fit the context because <code>string</code> works for both <code>Int</code>s and <code>Float</code>s. What does the type checker say?</p>
<pre><code>$ funkycmd zeros.fn
zeros.fn:6:21: ambiguous, multiple admissible types:
  Int
  Float
</code></pre>
<p>That's right, the type checker complains. We can fix this error with a type annotation. You can add an explicit type to any expression using the <code>:</code> symbol:</p>
<pre><code class="language-funky">func zero : Int = 0

func zero : Float = 0.0

func main : IO =
    println (string (zero : Int));
    quit
</code></pre>
<p>All is fine this time:</p>
<pre><code>$ funkycmd zeros.fn
0
</code></pre>
<p>Well, okay, those two <code>zero</code> functions are distinguishible by their type. But what if we put the same type?</p>
<pre><code class="language-funky">func lucky-number : Int = 7
func lucky-number : Int = 3

func main : IO =
    println (string lucky-number);
    quit
</code></pre>
<p>Which one gets printed? <code>7</code> or <code>3</code>? Make your guesses, ladies and gentlement...</p>
<p>Here's what happens:</p>
<pre><code>$ funkycmd lucky-number.fn
lucky-number.fn:2:27: function lucky-number with colliding type exists: test.fn:1:27
</code></pre>
<p>Oh, no! It didn't even let us define the second function, because its type collides with the first one.</p>
<p><strong>Funky doesn't let you overload a function if its type collides with an existing version.</strong></p>
<blockquote>
<p><strong>Details.</strong> When exactly do two types collide?</p>
<p>Do these two functions collide?</p>
<pre><code class="language-funky">func weirdo : a -&gt; a     = self
func weirdo : Int -&gt; Int = (* 2)
</code></pre>
<p>Indeed, they do! You might argue that the second one is more specific than the first one, so if both fit the context, the second one should be selected, but this doesn't fly in Funky, because it brings a whole bag of problems.</p>
<p>Instead, I chose simplicity: <strong>two types collide whenever their type variables can be substituted such that they become the same type</strong>.</p>
<p>For example: <code>a -&gt; Int</code> collides with <code>Float -&gt; a</code> (substitutes to <code>Float -&gt; Int</code>).</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="2-making-the-world-our-own.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="2-2-records.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="2-making-the-world-our-own.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="2-2-records.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
